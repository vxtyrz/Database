
/*comentario: criar a estrutura do banco dados  */
DROP TABLE IF EXISTS treinador;
DROP TABLE IF EXISTS modalidade;
DROP TABLE IF EXISTS atleta;

create table treinador (
codigo int         not null,
nome   varchar(50) not null,
primary key (codigo)
);

create table modalidade (
codigo        int         not null,
nome          varchar(50) not null,
codtreinador  int         not null,
primary key (codigo),
foreign key (codtreinador) references treinador (codigo)
);

create table atleta (
codigo          int          not null,
nome            varchar(50)  not null,
endereco        varchar(50)  not null,
cidade          varchar(50)  not null, 
estado          char(2)      not null,
datanascimento  date         not null,
peso            decimal(5,2) not null,
altura          decimal(4,2) not null,
codmodalidade   int          not null,
telefone        varchar(20)  not null,
primary key (codigo),
foreign key (codmodalidade) references modalidade (codigo));

select * from modalidade;


/* ALTER TABLE (alterar estrutura da tabela) 
add(adicionar) alter(modificar) drop(remover) rename(mudar nome)*/

alter table treinador 
add column telefone numeric(20) not null;

alter table treinador 
alter column telefone type numeric(15);

/* INSERT (inserir informações na tabela) */

insert into treinador (codigo,nome,telefone)
values (1,'Filipe Luiz',123);

insert into treinador (codigo,nome,telefone)
values (2,'Bernardinho',345);

insert into treinador (codigo,nome,telefone)
values (3,'Fabão',789);

insert into modalidade (codigo,nome,codtreinador)
values (1,'Futebol',1);

insert into modalidade (codigo,nome,codtreinador)
values (2,'Volei',2);

insert into modalidade (codigo,nome,codtreinador)
values (3,'Basquete',3);

insert into atleta (codigo,nome,endereco,cidade,estado,datanascimento,peso,altura,codmodalidade, telefone)
values (1,'Cristiano Ronaldo','Arabia Saudita','Dubai','DB',
123,'01/01/1990',75.00,1.87,1);

insert into atleta (codigo,nome,endereco,cidade,estado,datanascimento,peso,altura,codmodalidade, telefone)
values (2,'Giba','Rio de Janeiro','Rio de Janerio','RJ',
345,'05/05/1980',80.00,1.95,2);

insert into atleta (codigo,nome,endereco,cidade,estado,datanascimento,peso,altura,codmodalidade, telefone)
values (3,'Bronny James','Los Angeles','USA','US',
789,'10/10/2000',85.00,1.91,3);

insert into atleta (codigo,nome,endereco,cidade,estado,
telefone,datanascimento,peso,altura,codmodalidade)
values (4,'Neymar Junior','Santos','Santos','SP',
654,'15/05/1990',75.00,1.65,1);

select * from atleta;
select * from modalidade;
select * from treinador;

----------------------------------------------
/* UPDATE (alterar informações tabela)  */

update atleta set cidade = 'Rio de Janeiro', estado = 'RJ'
where codigo = 4;

update treinador set telefone = 222
where codigo = 1;

--------------------------------------------
/* DELETE (remover informações tabela)  */

insert into treinador (codigo,nome,telefone)
values (4,'teste',111);

select * from treinador;

delete from treinador 
where codigo = 4;

/* AULA 9 - COMANDOS DML*/
insert into treinador (codigo,nome,telefone)
values(4, 'exemplo', 1234);

select * from treinador;

update treinador set telefone = 222
where codigo = 4;

delete from treinador
where codigo = 4;


/* pesquisa informações (SELECT) */
select * from modalidade;
select * from treinador;
select * from atleta;

/* mostrar apenas alguns campos */
select nome from modalidade;
select nome, telefone from atleta;
select nome, peso, altura from atleta;

/* mostrar os campos ordenaos (ORDER BY) */
select * from atleta
order by altura;

/* ordem crecente */
select * from atleta
order by altura;

/* ordem decrescente */
select * from atleta
order by altura desc;

/* mostrar info com filtros (WHERE) */
select * from atleta
where cidade = 'USA';

/* pesquisar pelo código */
select * from atleta
where codigo = 2;

/* pesquisa peso */
select * from atleta
where peso = 75.0;

/* pesquisa WHERE operadores AND e OR */
select * from atleta
where codigo = 1 or codigo = 2;

select * from atleta
where codigo = 1 and cidade = 'Dubai';

/* comandos de conjunto (intervalos) IN e BETWEEN */
/* valores alternados */
select * from atleta
where codigo in (2,4);

/* valores sequenciais */
select * from atleta
where codigo between 1 and 3;

/* pesquisa valores varchar (LIKE) */
select * from atleta
where nome like '%Cris%';


/* nova tabela */
DROP TABLE IF EXISTS campeonato;


CREATE TABLE campeonato (
codigo int NOT NULL,
datainscricao date NOT NULL,
valor decimal (6,2) NOT NULL,
codatleta int NOT NULL,
codmodalidade int NOT NULL,
PRIMARY KEY (codigo),
FOREIGN KEY (codatleta) references atleta (codigo),
FOREIGN KEY (codmodalidade) references modalidade (codigo)
);

insert into campeonato (codigo, datainscricao, valor, codatleta, codmodalidade)
values (1, '01/09/2025', 140.00, 4, 55);

insert into campeonato (codigo, datainscricao, valor, codatleta, codmodalidade)
values (2, '02/09/2025', 150.00, 3, 66);

insert into campeonato (codigo, datainscricao, valor, codatleta, codmodalidade)
values (3, '03/09/2025', 160.00, 2,77);

insert into campeonato (codigo, datainscricao, valor, codatleta, codmodalidade)
values (4, '04/09/2025', 170.00, 1, 88);

select * from campeonato;

/* funções agregação */
/* somar coluna VALOR */
select sum(valor) from campeonato;

select count(codigo) from campeonato;

/*média*/
select avg(valor) from campeonato;

/*verificar > < */
select max(valor) from campeonato;
select min(valor) from campeonato;

/* atribuir apelidos para tabelas 
select a.CODIGOCLIENTE, a.CODVENDA, b.NOMECLIENTE
EVITA QUE O COMANDO FIQUE EXTENSO
USAR O APELIDO APÓS O NOME DA TABELA NA CLAUSULA FROM */

/* AULA 10 - pesquisar multiplas tabelas */
1) Pesquisar nomes atletas e nomes das suas modalidades
select atleta.nome, modalidade.nome
from atleta, modalidade
where atleta.comodidade = modalidade.codigo;

2) Pesquisar nomes modalidades e nomes dos seus treinadores
select modalidade.nome, treinador.nome
from modalidade, treinador
where modalidade.codtreinador = treinador.codigo;

3) Pesquisar datainscricao e valor campeonato, nome atleta e nome modalidade;

select campeonato.datainscricao, campeonato.valor, atleta.nome, modalidade.nome
from campeonato, atleta, modalidade
where campeonato.codatleta = atleta.codigo
and campeonato.codmodalidade = modalidade.codigo;

/* LISTA EXERCICIOS */